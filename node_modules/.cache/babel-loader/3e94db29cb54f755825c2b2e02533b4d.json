{"ast":null,"code":"import _defineProperty from\"C:/Users/plha9/Downloads/admin/admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/plha9/Downloads/admin/admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/plha9/Downloads/admin/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import'./AddEdit.css';import fireDb from'../firebase';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={name:\"\",email:\"\",phone:\"\",password:\"\"};var AddEdit=function AddEdit(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var name=state.name,email=state.email,phone=state.phone,password=state.password;var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;useEffect(function(){fireDb.child(\"users\").on(\"value\",function(snapshot){if(snapshot.val()!==null){setData(_objectSpread({},snapshot.val()));}else{setData({});}});return function(){setData({});};},[id]);useEffect(function(){if(id){setState(_objectSpread({},data[id]));}else{setState(_objectSpread({},initialState));}return function(){setState(_objectSpread({},initialState));};},[id,data]);var handleInputChange=function handleInputChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!name||!email||!phone||!password){toast.error(\"The input fields cannot be empty\");}else{if(!id){fireDb.child(\"users\").push(state,function(err){if(err){toast.error(err);}else{toast.success(\"User added sucessfully\");}});}else{fireDb.child(\"users/\".concat(id)).set(state,function(err){if(err){toast.error(err);}else{toast.success(\"User updated sucessfully\");}});}setTimeout(function(){return navigate.push(\"/\");},300);navigate(\"/\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"Container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",placeholder:\"Your Name...\",value:name||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Your Eamil...\",value:email||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"phone\",name:\"phone\",placeholder:\"Your 8 digits phone No...\",value:phone||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Password...\",value:password||\"\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"Submit\",value:id?\"Update\":\"Save\"})]})});};export default AddEdit;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","fireDb","toast","initialState","name","email","phone","password","AddEdit","state","setState","data","setData","navigate","id","child","on","snapshot","val","handleInputChange","event","target","value","handleSubmit","e","preventDefault","error","push","err","success","set","setTimeout"],"sources":["C:/Users/plha9/Downloads/admin/admin/src/pages/AddEdit.js"],"sourcesContent":["import React, {useEffect, useState,} from 'react'\r\nimport { useNavigate, useParams} from 'react-router-dom';\r\nimport './AddEdit.css';\r\nimport fireDb from '../firebase';\r\nimport {toast} from 'react-toastify';\r\n\r\n\r\n\r\nconst initialState = {\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n}\r\n\r\nconst AddEdit = () => {\r\n    const [state, setState] = useState(initialState);\r\n    const [data, setData] = useState({});\r\n\r\n    const {name, email, phone, password} = state;\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const {id} = useParams();\r\n\r\n    useEffect (()=> {\r\n        fireDb.child(\"users\").on(\"value\", (snapshot) => {\r\n          if (snapshot.val() !== null){\r\n            setData({...snapshot.val() });\r\n          }\r\n          else {\r\n            setData({});\r\n          }\r\n        });\r\n    \r\n        return () => {\r\n          setData({});\r\n        }; \r\n      },[id]);\r\n\r\n      useEffect(() => {\r\n        if (id) {\r\n           setState({...data[id]}) \r\n        }\r\n        else {\r\n            setState({...initialState})\r\n        }\r\n\r\n        return () => {\r\n            setState({...initialState})\r\n        }\r\n      },[id, data])\r\n\r\n    const handleInputChange = (event) => {\r\n        const {name,value} = event.target;\r\n        setState({...state, [name]: value})\r\n    };\r\n\r\n    const handleSubmit = (e)=> {\r\n        e.preventDefault();\r\n        if (!name || !email || !phone || !password) {\r\n            toast.error(\"The input fields cannot be empty\")\r\n        }\r\n        else {\r\n            if(!id) {\r\n                fireDb.child(\"users\").push(state, (err) => {\r\n                    if (err) {\r\n                        toast.error(err);\r\n                    }\r\n                    else {\r\n                        toast.success(\"User added sucessfully\");\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                fireDb.child(`users/${id}`).set(state, (err) => {\r\n                    if (err) {\r\n                        toast.error(err);\r\n                    }\r\n                    else {\r\n                        toast.success(\"User updated sucessfully\");\r\n                    }\r\n                });\r\n\r\n            }\r\n            \r\n            setTimeout(() => navigate.push (\"/\"),300);\r\n            navigate(\"/\")  \r\n        }\r\n\r\n    };\r\n  return (\r\n    <div className=\"Container\">\r\n        <form\r\n            className=\"form\"\r\n            onSubmit={handleSubmit}\r\n            >\r\n            <label htmlFor='name'>Name</label>\r\n            <input\r\n            type=\"text\"\r\n            id=\"name\"\r\n            name=\"name\"\r\n            placeholder= \"Your Name...\"\r\n            value={name || \"\"}\r\n            onChange={handleInputChange}\r\n            />\r\n\r\n            <label htmlFor='email'>Email</label>\r\n            <input\r\n            type=\"email\"\r\n            id=\"email\"\r\n            name=\"email\"\r\n            placeholder= \"Your Eamil...\"\r\n            value={email || \"\"}\r\n            onChange={handleInputChange}\r\n            />\r\n            <label htmlFor='phone'>Phone</label>\r\n            <input\r\n            type=\"number\"\r\n            id=\"phone\"\r\n            name=\"phone\"\r\n            placeholder= \"Your 8 digits phone No...\"\r\n            value={phone || \"\"}\r\n            onChange={handleInputChange}\r\n            />\r\n            <label htmlFor='password'>Password</label>\r\n            <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            name=\"password\"\r\n            placeholder= \"Password...\"\r\n            value={password || \"\"}\r\n            onChange={handleInputChange}\r\n            />\r\n            <input\r\n            type=\"Submit\"\r\n            value={id ? \"Update\" : \"Save\"}\r\n            \r\n            />\r\n        </form>\r\n    </div>\r\n   \r\n  )\r\n}\r\n\r\nexport default AddEdit"],"mappings":"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"},"metadata":{},"sourceType":"module"}